<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Roblox on Anaminus.Blog</title><link>https://anaminus.github.io/blog/tags/roblox/</link><description>Recent content in Roblox on Anaminus.Blog</description><generator>Hugo</generator><language>en-US</language><lastBuildDate>Thu, 22 Jun 2023 12:00:00 +0000</lastBuildDate><atom:link href="https://anaminus.github.io/blog/tags/roblox/index.xml" rel="self" type="application/rss+xml"/><item><title>How the Plugin Marketplace actually works</title><link>https://anaminus.github.io/blog/posts/plugin-marketplace/</link><pubDate>Thu, 22 Jun 2023 12:00:00 +0000</pubDate><guid>https://anaminus.github.io/blog/posts/plugin-marketplace/</guid><content:encoded>&lt;h2 id="part-i---the-plugin-compensation-model"&gt;Part I - The Plugin Compensation Model&lt;/h2&gt;
&lt;p&gt;You are &lt;strong&gt;developing a game&lt;/strong&gt; on Roblox. Some aspect of your workflow is
lacking, so you write a Studio plugin. This plugin improves the workflow of the
&lt;strong&gt;development of your game&lt;/strong&gt;. You rejoice, as you are able to &lt;strong&gt;develop your
game&lt;/strong&gt; better. The hours put into the development of the plugin are compensated
by the increase in revenue deriving from the plugin allowing you to push out
updates and fixes to your game faster and more efficiently.&lt;/p&gt;
&lt;p&gt;Compensation for hours worked are derived from &lt;strong&gt;your game&lt;/strong&gt;, so putting in work
that doesn&amp;rsquo;t improve &lt;strong&gt;your game&lt;/strong&gt; is wasted work. If you are improving a plugin
that does not result in an improvement to your game, then &lt;strong&gt;you will not be
compensated for your work&lt;/strong&gt;. Thus, if there is no game, but you are still doing
work on plugins, then you are not being compensated.&lt;/p&gt;
&lt;h2 id="part-ii---arent-developers-just-peachy"&gt;Part II - Aren&amp;rsquo;t developers just peachy?&lt;/h2&gt;
&lt;p&gt;Out of the goodness of your heart, you release this plugin for use by other
developers. You have no obligation to do this, nor are you beholden to any other
users of your plugin. You&amp;rsquo;ve already been compensated (by your game), so this is
entirely a charitable gesture. If you&amp;rsquo;re smart, you either maintain it as a
hobby, or just let it sit there while you do more important things.&lt;/p&gt;
&lt;h2 id="part-iii---here-comes-the-money"&gt;Part III - Here comes the money&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://devforum.roblox.com/t/400582"&gt;Roblox decides&lt;/a&gt; to implement the option to put plugins on sale.
They do this either because they mistake how the Plugin Compensation Model
works, or they think developers&amp;rsquo; charity should be rewarded with some petty
cash.&lt;/p&gt;
&lt;p&gt;Regardless, this attracts developers to do work purely on plugins. As we know,
because they have no game backing their work, they are compensated only with
enough to buy a nice virtual hat or something. That is, no money.&lt;/p&gt;
&lt;h2 id="conclusions---this-isnt-a-part"&gt;Conclusions - This isn&amp;rsquo;t a part&lt;/h2&gt;
&lt;p&gt;To summarize, without a game backing your plugin:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Make plugin -&amp;gt; ??? -&amp;gt; No money&lt;/code&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;With a game:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Make plugin -&amp;gt; Improve game -&amp;gt; Yes money&lt;/code&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is how the Plugin Compensation Model has worked since the inception of
plugins, and this is how it continues to work to this day, despite what everyone
thinks, and despite Roblox&amp;rsquo;s apparent efforts to make it look like plugins can
bring in yes money independently. Don&amp;rsquo;t be fooled.&lt;/p&gt;
&lt;p&gt;Assuming that this model does not change:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The &amp;ldquo;marketplace&amp;rdquo; should be abolished. That is, all plugins should be free.
Allowing a price to be put on plugins tricks developers into believing that
they are a possible source of yes money.&lt;/li&gt;
&lt;li&gt;If you&amp;rsquo;re a plugin developer, make games instead. Make UGC. Make something
that can be serviced by plugins. Or, secure patrons. Seek contracting or
employment by one of the many studios sprouting up. Make plugins directly in
service of &lt;em&gt;their&lt;/em&gt; content while making them pay you definite yes money.&lt;/li&gt;
&lt;li&gt;Whatever it is you &lt;span title="oh baby a triple"&gt;&lt;em&gt;do&lt;/em&gt; do, do&lt;/span&gt; not
expect compensation for work done on a plugin that isn&amp;rsquo;t directly in service
of a game or other UGC. At best, expect no money.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title>CFrame mnemonics</title><link>https://anaminus.github.io/blog/posts/cframe-mnemonics/</link><pubDate>Tue, 31 Jan 2023 12:00:00 +0000</pubDate><guid>https://anaminus.github.io/blog/posts/cframe-mnemonics/</guid><description>A way to remember how CFrames are used.</description><content:encoded>&lt;h2 id="methods"&gt;Methods&lt;/h2&gt;
&lt;p&gt;Certain methods on CFrame have an equivalent operator-based expression, which
can be useful for understanding how they work:&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;Method&lt;/th&gt;
 &lt;th&gt;Expression&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;A:ToWorldSpace(B)&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;A * (B::CFrame)&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;A:ToObjectSpace(B)&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;A:Inverse() * (B::CFrame)&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;A:PointToWorldSpace(B)&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;A * (B::Vector3)&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;A:PointToObjectSpace(B)&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;A:Inverse() * (B::Vector3)&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;A:VectorToWorldSpace(B)&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;A.Rotation * (B::Vector3)&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;A:VectorToObjectSpace(B)&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;A:Inverse().Rotation * (B::Vector3)&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="space-conversion-analogy"&gt;Space-conversion analogy&lt;/h2&gt;
&lt;p&gt;CFrame multiplication is not equivalent to addition. However, certain aspects
can be reused in order to remember how it works.&lt;/p&gt;
&lt;p&gt;Pretend that &lt;code&gt;A * B&lt;/code&gt; is analogous to &lt;code&gt;B + A&lt;/code&gt;. Also pretend that &lt;code&gt;A:Inverse()&lt;/code&gt; is
analogous to &lt;code&gt;-A&lt;/code&gt;. There is no subtraction, but the formula &lt;code&gt;B - A&lt;/code&gt; can be
rewritten as &lt;code&gt;-A + B&lt;/code&gt;. So, when we see the expression &lt;code&gt;A:Inverse() * B&lt;/code&gt;, it can
be thought of as a sort of &lt;code&gt;B - A&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This explains ToObjectSpace. It &amp;ldquo;subtracts&amp;rdquo; the origin &lt;code&gt;A&lt;/code&gt; from the subject &lt;code&gt;B&lt;/code&gt;
to get the location of &lt;code&gt;B&lt;/code&gt; relative to &lt;code&gt;A&lt;/code&gt;. ToWorldSpace is the reverse; the
origin is added back to the subject to get the real world location.&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;Method&lt;/th&gt;
 &lt;th style="text-align: right"&gt;Analogy&lt;/th&gt;
 &lt;th style="text-align: right"&gt;Rewritten&lt;/th&gt;
 &lt;th&gt;Actual&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;A:ToWorldSpace(B)&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: right"&gt;&lt;code&gt;B + A&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: right"&gt;&lt;code&gt;A + B&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;A * B&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;A:ToObjectSpace(B)&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: right"&gt;&lt;code&gt;B - A&lt;/code&gt;&lt;/td&gt;
 &lt;td style="text-align: right"&gt;&lt;code&gt;-A + B&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;A:Inverse() * B&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;</content:encoded></item><item><title>On CFrame vectors</title><link>https://anaminus.github.io/blog/posts/cframe-vectors/</link><pubDate>Sun, 29 Jan 2023 12:00:00 +0000</pubDate><guid>https://anaminus.github.io/blog/posts/cframe-vectors/</guid><description>Correcting documentation on CFrames.</description><content:encoded>&lt;p&gt;In Roblox, the &lt;a href="https://create.roblox.com/docs/reference/engine/datatypes/CFrame"&gt;CFrame&lt;/a&gt; type has several &amp;ldquo;Vector&amp;rdquo; fields representing
the directions of various axes of the CFrame. There are two sets of 3 vectors:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://create.roblox.com/docs/reference/engine/datatypes/CFrame#RightVector"&gt;RightVector&lt;/a&gt;, &lt;a href="https://create.roblox.com/docs/reference/engine/datatypes/CFrame#UpVector"&gt;UpVector&lt;/a&gt;, &lt;a href="https://create.roblox.com/docs/reference/engine/datatypes/CFrame#LookVector"&gt;LookVector&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://create.roblox.com/docs/reference/engine/datatypes/CFrame#XVector"&gt;XVector&lt;/a&gt;, &lt;a href="https://create.roblox.com/docs/reference/engine/datatypes/CFrame#YVector"&gt;YVector&lt;/a&gt;, &lt;a href="https://create.roblox.com/docs/reference/engine/datatypes/CFrame#ZVector"&gt;ZVector&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Roblox&amp;rsquo;s documentation claims that these fields represent the rows and columns
of the CFrame&amp;rsquo;s rotation matrix. The X, Y, Z fields are the rows, and the Right,
Up, Look fields are the columns. &lt;strong&gt;This is very significantly incorrect&lt;/strong&gt;.
Inspecting the values of each component reveals it so:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;CFrame.identity:GetComponents()
	0 0 0 1 0 0 0 1 0 0 0 1

CFrame.identity.Position
	0 0 0

CFrame.identity.XVector
	1 0 0

CFrame.identity.YVector
	0 1 0

CFrame.identity.ZVector
	0 0 1

CFrame.identity.RightVector
	1 0 0

CFrame.identity.UpVector
	0 1 0

CFrame.identity.LookVector
	-0 -0 -1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;What we can see is that the X-, Y- and ZVector fields correspond directly to the
components:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Fields [Position][XVector][YVector][ZVector]
Components 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We also notice some other things:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RightVector and UpVector appear to be redundant with XVector and YVector.&lt;/li&gt;
&lt;li&gt;LookVector always equal to -ZVector.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Why would it be like this? Is the implementation incorrect?&lt;/p&gt;
&lt;p&gt;Nope. The explanation is that the X-, Y-, and ZVector fields represent the raw
components of the CFrame matrix, while the Right-, Up- and LookVector fields
represent more practical values.&lt;/p&gt;
&lt;p&gt;Originally, CFrames had only the LookVector field (stylized as &lt;code&gt;lookVector&lt;/code&gt;). It
represents the most interesting vector, being the &amp;ldquo;front&amp;rdquo; face of the CFrame, or
the direction the CFrame was &amp;ldquo;looking&amp;rdquo;. Very useful for getting things to look
at or move towards other things. For whatever reason, Roblox defined the front
face to be the &lt;em&gt;complement&lt;/em&gt; of the Z direction.&lt;/p&gt;
&lt;p&gt;Eventually, the other vector fields were added. RightVector and UpVector were
added as counterparts to LookVector. However, to correctly derive the raw
components from these vectors, one would have to remember to invert the
LookVector.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-lua" data-lang="lua"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;right&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cframe.RightVector&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cframe.UpVector&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;lookaway&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cframe.LookVector&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;r00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r01&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r02&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;right.X&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;right.Y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;right.Z&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;r10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r12&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;up.X&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;up.Y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;up.Z&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;r20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r22&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;lookaway.X&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lookaway.Y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lookaway.Z&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Because this would be confusing and easy to forget, the ZVector field was added
to represent the raw Z direction, along with XVector and YVector as
counterparts. This explains the redundancy of XVector/RightVector and
YVector/UpVector.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-lua" data-lang="lua"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cframe.XVector&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cframe.YVector&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;z&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cframe.ZVector&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;r00&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r01&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r02&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x.X&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;x.Y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;x.Z&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;r10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r12&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;y.X&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y.Y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y.Z&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;r20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r22&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;z.X&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;z.Y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;z.Z&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To summarize, RightVector is always equal to XVector, UpVector is always equal
to YVector, and LookVector is always equal to the complement of ZVector. And
don&amp;rsquo;t let the documentation let you think otherwise.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;RightVector == XVector
UpVector == YVector
LookVector == -ZVector
&lt;/code&gt;&lt;/pre&gt;</content:encoded></item><item><title>Rojo wrangling</title><link>https://anaminus.github.io/blog/posts/rojo-wrangling/</link><pubDate>Mon, 19 Dec 2022 12:00:00 +0000</pubDate><guid>https://anaminus.github.io/blog/posts/rojo-wrangling/</guid><description>Getting Rojo to fit your project's structure.</description><content:encoded>&lt;p&gt;I have particular preferences about how I want my projects to be structured, and
I will bend my tools to make it work. This time, the tool being flexed is
&lt;a href="https://rojo.space/"&gt;Rojo&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I want related modules to be grouped together into one &amp;ldquo;package&amp;rdquo;. If a package
has a server component and a client component, I want those two files to live
next to each other under the same folder. However, there are two problems that
make this structure difficult to have.&lt;/p&gt;
&lt;p&gt;Problem #1 is how Roblox handles replication. The client component has to be in
one location in order to replicate to clients, while the server component has to
be in a different location in order to be isolated from clients. They inherently
cannot be together (how dramatic).&lt;/p&gt;
&lt;p&gt;There &lt;em&gt;is&lt;/em&gt; the new &lt;a href="https://robloxapi.github.io/ref/enum/RunContext.html"&gt;RunContext&lt;/a&gt; property that might solve this
problem, but I haven&amp;rsquo;t explored its uses in full, and I&amp;rsquo;m somewhat skeptical of
its utility. More importantly, it doesn&amp;rsquo;t have first-class support in Rojo, so
it&amp;rsquo;s not terribly easy to use.&lt;/p&gt;
&lt;p&gt;Problem #2 is that the default structure for Rojo projects is rather literal: a
file corresponds to an instance. With a simple tree definition, Rojo causes the
file structure to correspond mostly to the DataModel structure, which means
DataModel problems become file system problems.&lt;/p&gt;
&lt;p&gt;There is an out, though. In Rojo, projects are recursive. While traversing the
project tree, if a &lt;code&gt;project.json&lt;/code&gt; file is encountered, it will be turned into a
node by evaluating the content as a sort of sub-project. The rules for how this
works turns out to be very relaxed. Enough so that it&amp;rsquo;s possible to get Rojo to
build just about any project structure if you put in the effort.&lt;/p&gt;
&lt;p&gt;To generalize this concept, I introduce what I call &amp;ldquo;pointer files&amp;rdquo;. These are
just regular &lt;code&gt;project.json&lt;/code&gt; files, but they have barest minimum content:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nt"&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;NAME&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nt"&gt;&amp;#34;tree&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:{&lt;/span&gt;&lt;span class="nt"&gt;&amp;#34;$path&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;REFERENT&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;}}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Where &lt;code&gt;NAME&lt;/code&gt; defines the name of the node, and &lt;code&gt;REFERENT&lt;/code&gt; defines a path to the
file to be used as the node, relative to the project file. If you give each
pointer file a different name, then you can create any number of pointers in the
same folder.&lt;/p&gt;
&lt;h2 id="packages-example"&gt;Packages example&lt;/h2&gt;
&lt;p&gt;As an example, let&amp;rsquo;s say I have a &lt;code&gt;pkg&lt;/code&gt; folder that I use to contain packages.
Each subfolder is one package, and &amp;ldquo;server&amp;rdquo; and &amp;ldquo;client&amp;rdquo; files within are the
respective components:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pkg/foo/server.lua&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pkg/foo/client.lua&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pkg/bar/server.lua&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pkg/bar/client.lua&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Then I have a separate &lt;code&gt;game&lt;/code&gt; folder, which contains a literal representation of
the DataModel:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;game/ServerScriptService&lt;/code&gt;: Contains server components.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;game/ReplicatedStorage&lt;/code&gt;: Contains client components.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I can &amp;ldquo;unpack&amp;rdquo; my packages by creating a number of pointer files under the
&lt;code&gt;game&lt;/code&gt; folder that point to files in the &lt;code&gt;pkg&lt;/code&gt; folder:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-text" data-lang="text"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;game/ServerScriptService/foo.project.json
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; {&amp;#34;name&amp;#34;:&amp;#34;foo&amp;#34;,&amp;#34;tree&amp;#34;:{&amp;#34;$path&amp;#34;:&amp;#34;../../pkg/foo/server.lua&amp;#34;}}
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;game/ServerScriptService/bar.project.json
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; {&amp;#34;name&amp;#34;:&amp;#34;bar&amp;#34;,&amp;#34;tree&amp;#34;:{&amp;#34;$path&amp;#34;:&amp;#34;../../pkg/bar/server.lua&amp;#34;}}
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;game/ReplicatedStorage/foo.project.json
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; {&amp;#34;name&amp;#34;:&amp;#34;foo&amp;#34;,&amp;#34;tree&amp;#34;:{&amp;#34;$path&amp;#34;:&amp;#34;../../pkg/foo/client.lua&amp;#34;}}
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;game/ReplicatedStorage/bar.project.json
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; {&amp;#34;name&amp;#34;:&amp;#34;bar&amp;#34;,&amp;#34;tree&amp;#34;:{&amp;#34;$path&amp;#34;:&amp;#34;../../pkg/bar/client.lua&amp;#34;}}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Finally, the root &lt;code&gt;default.project.json&lt;/code&gt; points to the &lt;code&gt;game&lt;/code&gt; folder, so that
building the project builds everything from there.&lt;/p&gt;
&lt;h2 id="cloning-example"&gt;Cloning example&lt;/h2&gt;
&lt;p&gt;This technique is surprisingly versatile. Here&amp;rsquo;s another example: I have two
scripts that are used as the entrypoints for the server and client,
respectively. They both share a common &amp;ldquo;maid&amp;rdquo; module. The normal solution is to
have common modules stored under ReplicatedStorage. But I want the client
entrypoint to be snappy, so depending on modules outside of ReplicatedFirst is
not allowed. Instead, I have the structure set up as the following:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;core/bootstrap.client/init.client.lua&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;core/bootstrap.client/maid.project.json&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;core/bootstrap.server/init.server.lua&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;core/bootstrap.server/maid.project.json&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;core/maid.lua&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Both &lt;code&gt;maid.project.json&lt;/code&gt; files have the following content:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nt"&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;maid&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nt"&gt;&amp;#34;tree&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:{&lt;/span&gt;&lt;span class="nt"&gt;&amp;#34;$path&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;../maid.lua&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;}}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Then I have the usual pointers under the game tree to move the scripts to their
proper locations under ReplicatedFirst and ServerScriptService.&lt;/p&gt;
&lt;p&gt;What&amp;rsquo;s interesting is that, when Rojo builds the project, it creates a copy of
the &lt;code&gt;maid.lua&lt;/code&gt; module under each bootstrap script. This allows me to have just
one file as the source of two separate modules! I&amp;rsquo;m sure this definitely wont
backfire in some subtle way!&lt;/p&gt;
&lt;h2 id="automation"&gt;Automation&lt;/h2&gt;
&lt;p&gt;While my project is still in its infancy, I&amp;rsquo;m creating, removing, and renaming
files left and right. Manually keeping the pointer files up to date is an
exercise in futility, so I automate the whole thing with an &lt;a href="https://github.com/anaminus/rbxmk"&gt;rbxmk&lt;/a&gt;
script instead. This script defines how to map files around, while the
&lt;a href="https://gist.github.com/Anaminus/135999033fa01a3b1491b0d0e54b6f68"&gt;Build.rbxmk.lua&lt;/a&gt; library does the heavy lifting. An example
script might look like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-lua" data-lang="lua"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;-- Require the Build library.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;Build&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rbxmk.runFile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path.expand&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;$sd/lib/Build.rbxmk.lua&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;-- Map package components to their respective locations.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;Build.package&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;src/pkg&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	&lt;span class="n"&gt;boot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;game/ReplicatedFirst&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	&lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;game/ServerScriptService&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	&lt;span class="n"&gt;client&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;game/ReplicatedStorage/client&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	&lt;span class="n"&gt;shared&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;game/ReplicatedStorage/shared&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	&lt;span class="n"&gt;internal&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;game/ReplicatedStorage/internal&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;-- Map bootstrap scripts.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;Build.ref&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;core/bootstrap.client&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;game/ReplicatedFirst/bootstrap&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;Build.ref&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;core/bootstrap.server&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;game/ServerScriptService/bootstrap&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;-- Remove any files that haven&amp;#39;t been touched by this build script, which&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;-- accounts for renames/removals/etc.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;Build.clean&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;game&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Unfortunately, the script requires the latest unreleased version of rbxmk, so
you&amp;rsquo;ll have to build it yourself if you want to use this (sorry!). This post is
more to showcase the technique of abusing Rojo&amp;rsquo;s project files to do crazy
things anyway.&lt;/p&gt;
&lt;p&gt;This technique is very general, so there&amp;rsquo;s nothing stopping you from
implementing it with your preferred method of automation. Come up with a
structure that best suits your needs!&lt;/p&gt;</content:encoded></item><item><title>Managing assets locally</title><link>https://anaminus.github.io/blog/posts/managing-assets-locally/</link><pubDate>Wed, 23 Nov 2022 12:00:00 +0000</pubDate><guid>https://anaminus.github.io/blog/posts/managing-assets-locally/</guid><description>Keeping your Roblox assets on your computer.</description><content:encoded>&lt;p&gt;If you&amp;rsquo;re not indoctrinated into the cult of The Cloud™, then managing assets on
Roblox can be a pain. The assumption seems to be that you&amp;rsquo;re meant to upload
everything and subject it to moderation whether it&amp;rsquo;s ready or not.&lt;/p&gt;
&lt;p&gt;I prefer to keep assets local for as long as possible. Roblox Studio has an
option to hot-reload assets that live on the local file system, which is
absolutely invaluable for fast iteration. Uploading a million variations of
textures that I&amp;rsquo;ll never use ever again doesn&amp;rsquo;t make any sense.&lt;/p&gt;
&lt;p&gt;The problem with locally-sourced assets is that there aren&amp;rsquo;t many locations that
Studio will read assets from. One of them is Roblox&amp;rsquo;s content folder, which is
referred to using the &lt;code&gt;rbxasset://&lt;/code&gt; scheme. This contains most of the assets
Roblox uses for their user interfaces, plugins, and whatnot. Unfortunately, it&amp;rsquo;s
annoying for developers to use for their own assets, because the location
changes every time Roblox updates.&lt;/p&gt;
&lt;p&gt;This could be worked around with some tooling, but Studio does have an
additional folder that is more persistent. It&amp;rsquo;s located in the same place where
settings are stored. On Windows, this is the following:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;%LocalAppData%\Roblox\LocalAssets
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;This folder behaves like the content folder. Files in here can be referred to
using the same &lt;code&gt;rbxasset://&lt;/code&gt; scheme. Studio sort of merges this with the content
folder, checking the other folder if a file was not found in the first.&lt;/p&gt;
&lt;p&gt;Studio also has a hidden setting that controls the location of this folder. In
the same place as LocalAssets (&lt;code&gt;%LocalAppData%\Roblox&lt;/code&gt;), there is the
&lt;code&gt;GlobalSettings_13.xml&lt;/code&gt; file (the numeric suffix may vary). Within this file is
the &amp;ldquo;Studio&amp;rdquo; class. Within the Studio class is a &amp;ldquo;LocalAssetsFolder&amp;rdquo; setting
that doesn&amp;rsquo;t appear in the normal settings list. This setting determines which
folder local assets will be read from.&lt;/p&gt;
&lt;p&gt;The problem with this folder is that it&amp;rsquo;s only &lt;em&gt;one&lt;/em&gt; folder. Us developers, we
tend to make many projects. And having to keep project-specific assets outside
of the project isn&amp;rsquo;t fun to deal with.&lt;/p&gt;
&lt;p&gt;My go-to solution is to use symbolic links, which is (very fortunately)
supported by Studio. The idea is to have a folder in your project that is used
for assets (e.g. &lt;code&gt;project/assets&lt;/code&gt;). A link to this folder is then made in the
LocalAssets folder, using the project&amp;rsquo;s name as the name of the link.&lt;/p&gt;
&lt;p&gt;Windows has the &lt;code&gt;mklink&lt;/code&gt; command for making symbolic links:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-batch" data-lang="batch"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;cd&lt;/span&gt; &lt;span class="nv"&gt;%LocalAppData%&lt;/span&gt;\Roblox\LocalAssets
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;mklink&lt;/span&gt; /D project path\to\project\assets
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This will make a directory link called &amp;ldquo;project&amp;rdquo; in the LocalAssets folder. Now
if I have the texture &lt;code&gt;project/assets/foobar.png&lt;/code&gt;, I can refer to it in Studio
as &lt;code&gt;rbxasset://project/foobar.png&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve simplified this process with a &lt;code&gt;.bat&lt;/code&gt; script that makes it possible to drag
a project&amp;rsquo;s asset folder into the script file, and the symbolic link is created
automatically:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-batch" data-lang="batch"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="k"&gt;echo&lt;/span&gt; off
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;: Replace with location configured by LocalAssetsFolder.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;cd&lt;/span&gt; &lt;span class="nv"&gt;%LocalAppData%&lt;/span&gt;\Roblox\LocalAssets
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="se"&gt;%%&lt;/span&gt;a &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;%~p1&lt;/span&gt;&lt;span class="s2"&gt;.&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="k"&gt;set&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;x=&lt;/span&gt;&lt;span class="se"&gt;%%&lt;/span&gt;&lt;span class="s2"&gt;~nxa&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;mklink&lt;/span&gt; /D &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;%x%&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;%1&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pause&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Note that this assumes the asset folder is located in the root of the project.
The script looks at the name of the parent directory of the given folder to get
the project name, which is used to name the link.&lt;/p&gt;
&lt;p&gt;As demonstrated, some tooling is required to manage assets locally, but at least
it only needs to be run once, at the start of a new project.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;m still working out the best way to deal with turning local assets into The
Cloud™ assets. I have some ideas, but I&amp;rsquo;ll save it for another post.&lt;/p&gt;</content:encoded></item><item><title>Exclusive replication</title><link>https://anaminus.github.io/blog/posts/exclusive-replication/</link><pubDate>Sun, 20 Nov 2022 12:00:00 +0000</pubDate><guid>https://anaminus.github.io/blog/posts/exclusive-replication/</guid><description>Getting Roblox to replicate things only to certain clients.</description><content:encoded>&lt;p&gt;Instances in Roblox &lt;strong&gt;replicate&lt;/strong&gt;. That is, a particular instance on the server
will have a copy of itself on each client, and all aspects of this instance are
kept synchronized, including what children it has. In almost all cases, this
replication occurs in one direction only, from server to client.&lt;/p&gt;
&lt;p&gt;Say the server has a red brick in the Workspace. This brick will be replicated
to all clients. When the server changes the brick&amp;rsquo;s color to blue, this change
will be replicated to each client, making their local copy of the brick also
blue. However, when a client tries to change the color of its brick to green,
this change is &lt;em&gt;not&lt;/em&gt; replicated back to the server or any other client. The
change remains local to the client. Moreover, because only changes are
replicated, the server wont constantly be trying to update the brick&amp;rsquo;s color
back to red, so it will remain green, at least until the server changes the
color again.&lt;/p&gt;
&lt;p&gt;A problem with most instances is that they have only two replication behaviors:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;All&lt;/strong&gt;: The instance is replicated to all clients.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;None&lt;/strong&gt;: The instance is not replicated to any client.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This can be annoying if we have an instance that we want to show only to one
client. Or if we want to keep network usage down, we want to replicate only
relevant instances instead of absolutely everything.&lt;/p&gt;
&lt;p&gt;Note that I said &amp;ldquo;most&amp;rdquo; instances. There is in fact exactly &lt;em&gt;one&lt;/em&gt; instance that
has a different behavior. If you look at the &lt;a href="https://create.roblox.com/docs/reference/engine/classes/PlayerGui"&gt;documentation page for
PlayerGui&lt;/a&gt;, you will see that it has a curious tag called &lt;code&gt;Player Replicated&lt;/code&gt;. The tag&amp;rsquo;s tooltip says the following:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This object’s replication behavior is dependent on the player who owns it.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;What this means is that the PlayerGui replicates only to one client.
Specifically, PlayerGui&amp;rsquo;s parent Player instance.&lt;/p&gt;
&lt;p&gt;It makes sense in context. GUIs are rendered locally on the client only for the
one player. It doesn&amp;rsquo;t make sense to render everyone else&amp;rsquo;s GUIs, so there&amp;rsquo;s no
point in replicating them either.&lt;/p&gt;
&lt;p&gt;We can use this as a solution to our problems. To replicate an instance
exclusively to one client, we can copy the instance to the client&amp;rsquo;s PlayerGui.&lt;/p&gt;
&lt;figure&gt;
&lt;img src="https://anaminus.github.io/blog/posts/exclusive-replication/fig1.png"&gt;
&lt;figcaption&gt;You can put anything under the PlayerGui.&lt;/figcaption&gt;
&lt;/figure&gt;&lt;p&gt;I use the term &amp;ldquo;exclusive&amp;rdquo; here rather than &amp;ldquo;selective&amp;rdquo;, because this technique
doesn&amp;rsquo;t actually let us select which clients a specific instance is replicated
to. Instead, we have to make a copy of the instance on the server for each
client we want to replicate to. It&amp;rsquo;s possible to write a module that manages all
of this for us, at which point the module could be called selective. But the
underlying technique is exclusive.&lt;/p&gt;
&lt;p&gt;Anyway, we can now choose which clients to replicate to, but there are some new
problems to take care of. Because we are using the PlayerGui, we have to
consider its other behaviors. Namely, that it renders ScreenGuis placed under
it. We want to be able to exclusively replicate a ScreenGui without
unintentionally rendering it. We could make an exception, such as forcing
&lt;code&gt;ScreenGui.Enabled&lt;/code&gt; to false before replicating, but there&amp;rsquo;s a more general
solution.&lt;/p&gt;
&lt;p&gt;Remember how I said that changes on the client do not replicate back to the
server? This includes moving the instance around. An instance on the server is
matched to an instance on the client by the instance itself, rather than its
location. So, on the client, as long as the instance stays under the DataModel,
it will continue to receive changes from the server no matter where it is
located.&lt;/p&gt;
&lt;figure&gt;
&lt;img src="https://anaminus.github.io/blog/posts/exclusive-replication/fig2.png"&gt;
&lt;figcaption&gt;Moving an instance is considered a distinct unit of change, like setting a
property or adding a new child. That is, whenever some other change occurs,
there isn&amp;rsquo;t going to be an additional check to make sure the instance in
question is in the right place. The Parent property of the instance will only be
replicated when it actually changes on the server.&lt;/figcaption&gt;
&lt;/figure&gt;&lt;p&gt;Instead of putting instances directly in the PlayerGui, let&amp;rsquo;s put them in a
Folder that is located under the PlayerGui. On the server, the Folder must
always stay here. On the client however, it can be moved to anywhere we want. By
moving it outside of the PlayerGui, the replication behavior is retained, while
the GUI-rendering behavior is dropped.&lt;/p&gt;
&lt;figure&gt;
&lt;img src="https://anaminus.github.io/blog/posts/exclusive-replication/fig3.png"&gt;
&lt;figcaption&gt;Changes to the Container on the server are still replicated to the Container
on the client, no matter where it is located. ServerStorage is perfectly usable
on the client, and makes for a good location to store the Container.&lt;/figcaption&gt;
&lt;/figure&gt;&lt;p&gt;There is only one more problem now: by default, all instances under the
PlayerGui will be removed before the player&amp;rsquo;s character respawns. For
ScreenGuis, this can be prevented with the ResetOnSpawn property, but Folders do
not have this. Fortunately, there is the
&lt;a href="https://create.roblox.com/docs/reference/engine/classes/StarterGui#ResetPlayerGuiOnSpawn"&gt;StarterGui.ResetPlayerGuiOnSpawn&lt;/a&gt; property. While this
is listed as deprecated, it can still be used just fine. However, it is also
hidden from the properties panel in Studio, so the command bar is needed in
order to change it:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-lua" data-lang="lua"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;game.StarterGui&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ResetPlayerGuiOnSpawn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Setting this property to false will prevent any instance under the PlayerGui
from being removed when the character respawns. Note that this does change
StarterGui behavior, so we&amp;rsquo;ll have to adjust accordingly.&lt;/p&gt;
&lt;p&gt;Overall, this is a very hacky workaround. But hopefully it justifies the
addition of some kind of &amp;ldquo;PlayerStorage&amp;rdquo; container, whose only purposes is to
replicate its descendants to one player at a time. There are other more
complicated solutions to selective replication, but I feel like this would be a
good and very simple intermediate step.&lt;/p&gt;
&lt;figure&gt;
&lt;img src="https://anaminus.github.io/blog/posts/exclusive-replication/fig4.png"&gt;
&lt;figcaption&gt;Get an icon ready!&lt;/figcaption&gt;
&lt;/figure&gt;&lt;p&gt;We might be tempted to do this right now; instead of putting the Container under
ServerStorage, we could call it &amp;ldquo;PlayerStorage&amp;rdquo; and put it directly under the
Player. However, if Roblox does add their own PlayerStorage container, then it
will conflict with ours, and things will likely break. Personally, I really like
the idea of PlayerStorage, and wouldn&amp;rsquo;t want to do anything that would
discourage Roblox from implementing it as-is. So, I would either put the
container somewhere else, or at least give it a different name.&lt;/p&gt;</content:encoded></item><item><title>Tiny UVs</title><link>https://anaminus.github.io/blog/posts/tiny-uv/</link><pubDate>Sat, 24 Sep 2022 00:00:00 +0000</pubDate><guid>https://anaminus.github.io/blog/posts/tiny-uv/</guid><description>Making minimal and efficient UVs in Blender for Roblox.</description><content:encoded>&lt;p&gt;You want to produce meshes with simple, solid color textures. Because the colors
are solid, you should be able to get away with using small textures. Tiny
textures. Single-digit resolution textures. Possible, right?&lt;/p&gt;
&lt;p&gt;The problem: Roblox applies linear interpolation to its textures. Here is a
2-by-1 Decal, where the left pixel is white, and the right pixel is black:&lt;/p&gt;
&lt;figure&gt;
&lt;img src="https://anaminus.github.io/blog/posts/tiny-uv/fig1.png"&gt;
&lt;/figure&gt;&lt;p&gt;Indeed, the left side is white, and the right side is black, but in between,
there is a smooth, linear interpolation from one pixel to the other.&lt;/p&gt;
&lt;p&gt;When constructing UVs for a mesh, we&amp;rsquo;ll have to find a way around this. Let&amp;rsquo;s
head over to Blender, and work on a simple plane mesh:&lt;/p&gt;
&lt;figure&gt;
&lt;img src="https://anaminus.github.io/blog/posts/tiny-uv/fig2.png"&gt;
&lt;/figure&gt;&lt;p&gt;The interpolation of the texture should be set to &lt;strong&gt;Linear&lt;/strong&gt;, and the extension
should be set to &lt;strong&gt;Repeat&lt;/strong&gt;. This will match how Roblox renders textures on
MeshParts. When we import it into Roblox, it looks mostly similar:&lt;/p&gt;
&lt;figure&gt;
&lt;img src="https://anaminus.github.io/blog/posts/tiny-uv/fig3.png"&gt;
&lt;/figure&gt;&lt;p&gt;Notably, the left side begins to fade towards black, while the right side fades
towards white, which proves that the texture repeats. So we&amp;rsquo;ll be able to use
Blender to get a rough idea of what Roblox will render.&lt;/p&gt;
&lt;p&gt;So how do we produce solid colors? We can&amp;rsquo;t just cover the whole pixel with a
face, because half of the pixel is always interpolating to its neighbor:&lt;/p&gt;
&lt;figure&gt;
&lt;img src="https://anaminus.github.io/blog/posts/tiny-uv/fig4.png"&gt;
&lt;/figure&gt;&lt;p&gt;To get a solid color, the coordinates have to be in the exact center of the
pixel:&lt;/p&gt;
&lt;figure&gt;
&lt;img src="https://anaminus.github.io/blog/posts/tiny-uv/fig5.png"&gt;
&lt;/figure&gt;&lt;p&gt;Two faces, each using one color:&lt;/p&gt;
&lt;figure&gt;
&lt;img src="https://anaminus.github.io/blog/posts/tiny-uv/fig6.png"&gt;
&lt;/figure&gt;&lt;p&gt;But does it work in Roblox?&lt;/p&gt;
&lt;figure&gt;
&lt;img src="https://anaminus.github.io/blog/posts/tiny-uv/fig7.png"&gt;
&lt;/figure&gt;&lt;p&gt;Indeed! To compare the colors, the top squares are regular Parts, while the
bottom squares are the mesh.&lt;/p&gt;
&lt;p&gt;UV coordinates are reused for SurfaceAppearance textures, so this technique can
be used to set the roughness and metalness of surfaces as well:&lt;/p&gt;
&lt;figure&gt;
&lt;img src="https://anaminus.github.io/blog/posts/tiny-uv/fig8.png"&gt;
&lt;/figure&gt;&lt;p&gt;&lt;strong&gt;Tip:&lt;/strong&gt; To set the coordinates of many faces at once, select all the faces, use
the scale tool, and set the scale amounts to 0. This will move all vertices to a
single location, which you can then move to the center of the desired pixel.&lt;/p&gt;
&lt;p&gt;&lt;video src="fig9.webm" controls loop&gt;&lt;/video&gt;&lt;/p&gt;
&lt;p&gt;Another interesting idea: Because colors are interpolated, we could set the
coordinates to somewhere besides a pixel center, in order to get more colors.
For example, the simple 2-by-1 white-to-black texture can also be used to get
any shade of gray.&lt;/p&gt;</content:encoded></item></channel></rss>