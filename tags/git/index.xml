<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Git on Anaminus.Blog</title><link>https://anaminus.github.io/blog/tags/git/</link><description>Recent content in Git on Anaminus.Blog</description><generator>Hugo</generator><language>en-US</language><lastBuildDate>Fri, 21 Jul 2023 10:26:01 +0000</lastBuildDate><atom:link href="https://anaminus.github.io/blog/tags/git/index.xml" rel="self" type="application/rss+xml"/><item><title>Git exclude</title><link>https://anaminus.github.io/blog/briefs/202307211026/</link><pubDate>Fri, 21 Jul 2023 10:26:01 +0000</pubDate><guid>https://anaminus.github.io/blog/briefs/202307211026/</guid><content:encoded>&lt;p&gt;&lt;code&gt;.git/info/exclude&lt;/code&gt; lets you gitignore things locally without modifying a
.gitignore that exists remotely.&lt;/p&gt;</content:encoded></item><item><title>Repo blog</title><link>https://anaminus.github.io/blog/briefs/202211230944/</link><pubDate>Wed, 23 Nov 2022 09:44:52 +0000</pubDate><guid>https://anaminus.github.io/blog/briefs/202211230944/</guid><content:encoded>&lt;p&gt;For future reference, my blog is just a git repo, so any changes will be visible
at &lt;a href="https://github.com/Anaminus/blog"&gt;https://github.com/Anaminus/blog&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title>Syncing things</title><link>https://anaminus.github.io/blog/posts/syncing-things/</link><pubDate>Sun, 06 Nov 2022 20:00:00 +0000</pubDate><guid>https://anaminus.github.io/blog/posts/syncing-things/</guid><description>How to set up Git over Syncthing.</description><content:encoded>&lt;p&gt;On my desktop, writings have to be technical, detailed, and correct. It&amp;rsquo;s hard
to write blog posts from there. I find it a lot easier to write casually if it&amp;rsquo;s
somewhere else, such as my laptop while sitting in a cushy chair.&lt;/p&gt;
&lt;p&gt;But the blog&amp;rsquo;s local repository is still on my desktop. How do I do things from
my laptop, then? It&amp;rsquo;s just Git, so it should be possible.&lt;/p&gt;
&lt;p&gt;Well, it is possible, but it&amp;rsquo;s a pain to get going, and there are two parts. The
first part involves setting up the &amp;ldquo;remote&amp;rdquo; repository as a bare repo somewhere
on the desktop. Then separate repositories are cloned from it, one on the
laptop, and another also on the desktop. These are just regular local
repositories, but instead of the remote being GitHub or something, it&amp;rsquo;s just
somewhere else on the desktop. There are some extra considerations, such as what
to do about syncing the &amp;ldquo;local remote&amp;rdquo; to the &amp;ldquo;remote remote&amp;rdquo; GitHub, but I
haven&amp;rsquo;t gotten that far, and don&amp;rsquo;t really care to.&lt;/p&gt;
&lt;p&gt;Anyway, the second part is that I need the laptop to be able to access the file
system of the desktop, in order to push to and pull from the &amp;ldquo;remote&amp;rdquo; repo. The
laptop is Linux, while the desktop is Windows, so there&amp;rsquo;s some finagling
required. I use a combination of &lt;a href="https://www.msys2.org/wiki/Setting-up-SSHd/"&gt;MSYS2 and SSHd&lt;/a&gt; to get this done.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve used this setup for exactly one repository so far, and that was mainly to
test whether it was even viable. I think I would only use it if I needed to do
the usual deep-focus work. But I&amp;rsquo;ve found that it&amp;rsquo;s difficult to do that kind of
work on my laptop, so I&amp;rsquo;m not exactly enthusiastic about this setup.&lt;/p&gt;
&lt;p&gt;The alternative setup, and what I&amp;rsquo;m currently doing, is to use
&lt;a href="https://syncthing.net/"&gt;Syncthing&lt;/a&gt;. I have Syncthing on both the laptop and desktop, and I
just configure the blog repository as a folder that syncs between them.&lt;/p&gt;
&lt;p&gt;Now, I suspect that Syncthing and Git wont play nice together. Some rudimentary
internet research says as much. To get around this, I just don&amp;rsquo;t sync the git
parts. There&amp;rsquo;s some other stuff that gets ignored, too. The exact patterns look
like this:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;.git* # No git files.
.git/ # No git directory.
*.sublime-workspace # Stop Sublime Text from getting weird.
*.lock # Hugo just drops this and leaves it lyin&amp;#39; around.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;On the desktop, the blog is a full repository, but from the perspective of the
laptop, it&amp;rsquo;s just a regular folder. I can still run Hugo on it, so that&amp;rsquo;s
nothing to worry about.&lt;/p&gt;
&lt;p&gt;I don&amp;rsquo;t get to do Git things from the laptop, but that&amp;rsquo;s fine. On the laptop,
the writing is the most important part. Proofreading and publishing can come
later, on the desktop. If anything, this setup is better, because it prevents me
from getting distracted.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s interesting how I find it hard to do focused programming on my laptop, but
easy to do casual writing. While on the desktop, it&amp;rsquo;s the complete opposite. If
there&amp;rsquo;s anything to take away from this post, it&amp;rsquo;s to use different devices for
different contexts.&lt;/p&gt;</content:encoded></item><item><title>Securing secret branches</title><link>https://anaminus.github.io/blog/posts/secret-branch/</link><pubDate>Sun, 06 Nov 2022 00:00:00 +0000</pubDate><guid>https://anaminus.github.io/blog/posts/secret-branch/</guid><description>How to make sure you don't git-push the wrong thing.</description><content:encoded>&lt;p&gt;Most posts I write will never be published. But I still keep them around
locally, because they often contain useful bits that will likely find their way
into another post.&lt;/p&gt;
&lt;p&gt;The blog is managed by git. When I want to publish a new post, I just commit and
push (&amp;ldquo;pushlish&amp;rdquo;?). I keep drafts on a separate branch that stays local.&lt;/p&gt;
&lt;p&gt;But how do I make sure it stays local? I don&amp;rsquo;t want to accidentally push super
secret drafts to GitHub! Fortunately, GitHub has what are called &amp;ldquo;Protection
rules&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;To set it up, first the branch needs to be on GitHub. It&amp;rsquo;s easy enough to create
a new branch on the website by going to the &lt;code&gt;/branches&lt;/code&gt; page.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://anaminus.github.io/blog/posts/secret-branch/fig1.png" width="284" height="113" loading="lazy"&gt;&lt;/figure&gt;&lt;p&gt;The branch has to be based off of another one. I used the same branch as what my
local &lt;code&gt;drafts&lt;/code&gt; branch is based off of. This will make accidental pulls safe,
since git will just think the local branch is the latest.&lt;/p&gt;
&lt;p&gt;Next, I went to Settings, then Branches, and added a new Branch protection rule,
where the pattern matched the name of the branch:&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://anaminus.github.io/blog/posts/secret-branch/fig2.png" width="795" height="229" loading="lazy"&gt;&lt;/figure&gt;&lt;p&gt;Then I included the Lock branch rule. This will prevent me from pushing to it. I
also included the &amp;ldquo;Do not allow bypassing above settings&amp;rdquo;. Seems like a safe
thing to do.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://anaminus.github.io/blog/posts/secret-branch/fig3.png" width="793" height="183" loading="lazy"&gt;&lt;/figure&gt;&lt;p&gt;Saved the rule, and that&amp;rsquo;s it.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://anaminus.github.io/blog/posts/secret-branch/fig4.png" width="794" height="150" loading="lazy"&gt;&lt;/figure&gt;&lt;p&gt;Now when I try to push to the branch, GitHub will reject the attempt.&lt;/p&gt;
&lt;figure&gt;&lt;img src="https://anaminus.github.io/blog/posts/secret-branch/fig5.png" width="458" height="246" loading="lazy"&gt;&lt;/figure&gt;&lt;p&gt;Notably, git still tries to upload everything, and the rejection comes
afterwards. I could add a local pre-push hook to prevent the uploading, but I&amp;rsquo;m
not worried about it. The point is to prevent the drafts from becoming public,
which has already been accomplished.&lt;/p&gt;</content:encoded></item></channel></rss>