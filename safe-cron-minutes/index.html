<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Blog posts from Anaminus"><link rel="shortcut icon" href=https://anaminus.github.io/blog/favicon.ico><link rel=stylesheet href=/blog/css/style.min.css><link rel=canonical href=https://anaminus.github.io/blog/safe-cron-minutes/><title>Safe cron minutes</title></head><body><header id=banner><h2><a href=https://anaminus.github.io/blog/>Blog</a></h2><nav><ul><li><a href=/blog/ title=posts>posts</a></li><li><a href=/blog/about/ title=about>about</a></li></ul></nav></header><main id=content><article><header id=post-header><h1>Safe cron minutes</h1><div><time>March 7, 2024</time></div></header><pre><code>06 07 08 09 11 12 13 17
18 19 21 22 23 24 26 27
33 34 36 37 38 39 41 42
43 47 48 49 51 52 53 54
</code></pre><h2 id=theory>Theory</h2><p>Everyone runs their scheduled jobs at simple minute steps like 60, 30, 15, or 5.</p><pre><code>   0 * * * *
*/30 * * * *
*/15 * * * *
*/ 5 * * * *
</code></pre><h2 id=problem>Problem</h2><p>Cron aligns minutes to the clock, leading to huge spikes of usage at those
intervals, as the hourly jobs, half-hourly jobs, etc, all run at once.</p><pre><code>|                       |                       |                       |
|           |           |           |           |           |           |
|     |     |     |     |     |     |     |     |     |     |     |     |
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |
|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
</code></pre><h2 id=solution>Solution</h2><p>Use random, unusual minutes to distribute the load. Exclude the most common
minutes, and nearby minutes based on prevalence.</p><pre><code>7 * * * *
26 */2 * * *
34,53 * * * *
</code></pre><h2 id=rules>Rules</h2><p>Begin with the set of all minutes in the hour.</p><ol><li>Exclude 5 minute intervals.</li><li>Exclude 15 minute intervals and nearest 1 minutes.</li><li>Exclude 30 minute intervals and nearest 2 minutes.</li><li>Exclude 60 minute intervals and nearest 4 minutes.</li><li>Select minutes randomly from the remaining set.</li></ol><pre><code>1.	2.	3.	4.	5.

00
	01
		02
			03
			04
05
				06 &lt;
				07 &lt;
				08 &lt;
				09 &lt;
10
				11 &lt;
				12 &lt;
				13 &lt;
	14
15
	16
				17 &lt;
				18 &lt;
				19 &lt;
20
				21 &lt;
				22 &lt;
				23 &lt;
				24 &lt;
25
				26 &lt;
				27 &lt;
		28
	29
30
	31
		32
				33 &lt;
				34 &lt;
35
				36 &lt;
				37 &lt;
				38 &lt;
				39 &lt;
40
				41 &lt;
				42 &lt;
				43 &lt;
	44
45
	46
				47 &lt;
				48 &lt;
				49 &lt;
50
				51 &lt;
				52 &lt;
				53 &lt;
				54 &lt;
55
			56
			57
		58
	59
00
</code></pre><h2 id=conclusion>Conclusion</h2><p>Is this really problem? Probably not; better solutions have likely taken care of
it.</p><p>Don&rsquo;t take <code>19 * * * *</code>, though. I&rsquo;m using it.</p></article></main><footer id=footer>Copyright Â© 2022 Anaminus</footer></body></html>