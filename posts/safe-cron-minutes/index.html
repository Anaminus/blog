<!doctype html><html lang=en-US dir=ltr><head><meta charset=utf-8><meta name=viewport content="initial-scale=1,width=device-width"><link rel=icon type=image/png sizes=32x32 href=/blog/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/blog/favicons/favicon-16x16.png><link rel="shortcut icon" href=/blog/favicons/favicon.ico><title>Safe cron minutes | Anaminus.Blog</title><meta name=twitter:card content="summary"><meta name=twitter:title content="Safe cron minutes | Anaminus.Blog"><meta name=twitter:description content="When is the best time to run your workflow?"><meta name=twitter:image content="https://anaminus.github.io/blog/favicons/favicon-512x512.png"><meta property="og:type" content="website"><meta property="og:title" content="Safe cron minutes | Anaminus.Blog"><meta property="og:description" content="When is the best time to run your workflow?"><meta property="og:image" content="https://anaminus.github.io/blog/favicons/favicon-512x512.png"><link rel=stylesheet href=/blog/main.min.7a1979f01cacc007a6287828d1660af97350060883a2ea5364a3562258585100.css integrity="sha256-ehl58ByswAemKHgo0WYK+XNQBgiDoupTZKNWIlhYUQA=" crossorigin=anonymous></head><body><header><a href=https://anaminus.github.io/blog/><svg class="header" width="43" height="9" viewBox="0 0 43 9"><title>Logo with title ".Blog"</title><path class="logo" d="m2 1v1H1v3h1v3h1V7h1v1h1V5h1V2H5V1H4v1H3V1zm0 2h1v1H2zm2 0h1v1H4z"/><path class="title" d="m13 1v7h4V7h-3V5h3V4h-3V2h3V1zm4 1v2h1V2zm0 3v2h1V5zm2-2v5h5V7h-4V3zm7 0v1h3V3zm3 1v3h1V4zm0 3h-3v1h3zm-3 0V4h-1v3zm6-4v1h4V3zm0 1h-1v3h1zm0 3v1h3V7zm3 0h1V5h-3v1h2zM9 7v1h1V7z"/><path class="cursor" d="m37 8h5v1h-5z"/></svg></a></header><main><nav><a href=https://anaminus.github.io/blog/posts/>Posts</a></nav><article><header><div class=title><h1>Safe cron minutes</h1><span class=date>Published on <time>2024-03-07</time></span></div><div class=subtitle><div class=description>When is the best time to run your workflow?</div><span class=tags><a class=tag href=https://anaminus.github.io/blog/tags/github/>#github</a></span></div></header><pre><code>06 07 08 09 11 12 13 17
18 19 21 22 23 24 26 27
33 34 36 37 38 39 41 42
43 47 48 49 51 52 53 54
</code></pre><h2 id=theory>Theory</h2><p>Everyone runs their scheduled jobs at simple minute steps like 60, 30, 15, or 5.</p><pre><code>   0 * * * *
*/30 * * * *
*/15 * * * *
*/ 5 * * * *
</code></pre><h2 id=problem>Problem</h2><p>Cron aligns minutes to the clock, leading to huge spikes of usage at those
intervals, as the hourly jobs, half-hourly jobs, etc, all run at once.</p><pre><code>|                       |                       |                       |
|           |           |           |           |           |           |
|     |     |     |     |     |     |     |     |     |     |     |     |
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |
|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
</code></pre><h2 id=solution>Solution</h2><p>Use random, unusual minutes to distribute the load. Exclude the most common
minutes, and nearby minutes based on prevalence.</p><pre><code>7 * * * *
26 */2 * * *
34,53 * * * *
</code></pre><h2 id=rules>Rules</h2><p>Begin with the set of all minutes in the hour.</p><ol><li>Exclude 5 minute intervals.</li><li>Exclude 15 minute intervals and nearest 1 minutes.</li><li>Exclude 30 minute intervals and nearest 2 minutes.</li><li>Exclude 60 minute intervals and nearest 4 minutes.</li><li>Select minutes randomly from the remaining set.</li></ol><pre><code>1.	2.	3.	4.	5.

00
	01
		02
			03
			04
05
				06 &lt;
				07 &lt;
				08 &lt;
				09 &lt;
10
				11 &lt;
				12 &lt;
				13 &lt;
	14
15
	16
				17 &lt;
				18 &lt;
				19 &lt;
20
				21 &lt;
				22 &lt;
				23 &lt;
				24 &lt;
25
				26 &lt;
				27 &lt;
		28
	29
30
	31
		32
				33 &lt;
				34 &lt;
35
				36 &lt;
				37 &lt;
				38 &lt;
				39 &lt;
40
				41 &lt;
				42 &lt;
				43 &lt;
	44
45
	46
				47 &lt;
				48 &lt;
				49 &lt;
50
				51 &lt;
				52 &lt;
				53 &lt;
				54 &lt;
55
			56
			57
		58
	59
00
</code></pre><h2 id=conclusion>Conclusion</h2><p>Is this really problem? Probably not; better solutions have likely taken care of
it.</p><p>Don&rsquo;t take <code>19 * * * *</code>, though. I&rsquo;m using it.</p></article></main><footer><span class=license>Content is licensed under <a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA-4.0</a><a class=feed-icon title="RSS feed" href=https://anaminus.github.io/blog/index.xml><svg width="128" height="128" viewBox="0 0 256 256"><path d="m92 189a24 24 0 01-24 24 24 24 0 01-24-24 24 24 0 0124-24 24 24 0 0124 24z"/><path d="m160 213h-34a82 82 0 00-82-82V97a116 116 0 01116 116z"/><path d="M184 213A140 140 0 0044 73V38a175 175 0 01175 175z"/></svg></a></span>
<span class=publication><svg viewBox="0 0 7 7" width="7" height="7"><path d="m2 0v1H1v3h1v3h1V6h1v1h1V4h1V1H5V0H4v1H3V0zm0 2h1v1H2zm2 0h1v1H4z"/></svg> 2022â€“2025 <a href=https://anaminus.github.io/>Anaminus</a></span></footer></body></html>